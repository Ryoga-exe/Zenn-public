---
title: "ç­‘æ³¢å¤§å­¦æ–°æ­“ Web 2024 ã®èˆå°è£"
emoji: "ğŸŒ¸"
type: "tech"
topics: ["web", "astro", "css", "ç­‘æ³¢å¤§å­¦", "adventcalendar"]
published: false
---

ã“ã®è¨˜äº‹ã¯ã€[mast Advent Calendar 2024](https://adventar.org/calendars/10425) 8 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ç§ã¯æƒ…å ±ç§‘å­¦é¡ç”Ÿã§æƒ…å ±ãƒ¡ãƒ‡ã‚£ã‚¢å‰µæˆå­¦é¡ç”Ÿã§ã‚‚ãªã‚“ã§ã‚‚ãªã„ã®ã§ã™ãŒã€çŸ¥äººã«æ›¸ã“ã†ã¨å‹§ã‚ã‚‰ã‚ŒãŸ[^1]ã®ã§æƒ…å ±ãƒ¡ãƒ‡ã‚£ã‚¢å‰µæˆã®æ°—æŒã¡ã«ãªã£ã¦æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚
7 æ—¥ç›®ã®è¨˜äº‹ã¯ [ğŸ](https://x.com/ao_ringo_uni) ã•ã‚“ã®ã€Œ2024 ãƒ™ã‚¹ãƒˆãƒã‚¤ã€ã§ã—ãŸã€‚

2024 å¹´ 4 æœˆã«ç­‘æ³¢å¤§å­¦æ–°æ­“ç¥­ãŒé–‹å‚¬ã•ã‚Œã¾ã—ãŸã€‚
ç§ã¯ã€[æ–°æ­“ç¥­ Web ã‚µã‚¤ãƒˆ](https://shinkan-web.zdk.tsukuba.ac.jp/)ã®åˆ¶ä½œã‚’æ‹…å½“ã—ãŸã®ã§ã€å·¥å¤«ã—ãŸç‚¹ãªã©ã®è£è©±ã‚’å°‘ã—ãŠè©±ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

[^1]: ã¨ã„ã†ã‹ã€Œæ›¸ã‘ï¼ï¼ï¼ã€ã¨è„…ã•ã‚ŒãŸ

## æ–°æ­“ç¥­ã¨ã¯

ç­‘æ³¢å¤§å­¦ã§ã¯æ¯å¹´ 4 æœˆã«æ–°å…¥ç”Ÿæ­“è¿å§”å“¡ä¼šä¸»å‚¬ã®ä¸‹ã€æ–°æ­“ç¥­ãŒé–‹å‚¬ã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã¯æ–°å…¥ç”Ÿã‚’æ­“è¿ã™ã‚‹å¤§å­¦ã®ä¸€å¤§ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚ã‚Šã€ã‚µãƒ¼ã‚¯ãƒ«ã‚„éƒ¨æ´»å‹•ã€å­¦ç”Ÿå›£ä½“ã®å¤§è¦æ¨¡ãªæ–°æ­“ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

ã“ã®æ–°æ­“ç¥­ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å¤šãã®æ–°å…¥ç”Ÿã«å±Šã‘ã€ã¾ãŸå„å‚åŠ å›£ä½“ã®è©³ç´°æƒ…å ±ã‚’æä¾›ã™ã‚‹ãŸã‚ã® Web ã‚µã‚¤ãƒˆã¨ã—ã¦ã€Œæ–°æ­“ Webã€ã‚’ä½œã‚‹ã“ã¨ã¨ãªã‚Šã¾ã—ãŸã€‚

![æ–°æ­“ Web ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã€‚ä¸Šéƒ¨ã«ã¯æ¤œç´¢ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œä¸­å¤®éƒ¨ã«å›£ä½“ãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«æ–°æ­“ç¥­ã®ãƒ­ã‚´ãŒå¤§ããè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚](/images/tsukuba-shinkan-web/screenshot.png)
_ä»Šå¹´åº¦ã®æ–°æ­“ Web ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ - https://shinkan-web.zdk.tsukuba.ac.jp ã‚ˆã‚Šå¼•ç”¨_

## æ²è¼‰æƒ…å ±

ã‚µã‚¤ãƒˆã«ã¯ä»¥ä¸‹ã®æƒ…å ±ã‚’æ²è¼‰ã™ã‚‹ã“ã¨ã¨ãªã‚Šã¾ã—ãŸã€‚

- å›£ä½“æƒ…å ±
  - ä¸€è¦§ãƒšãƒ¼ã‚¸
  - å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸
- æ–°æ­“ç¥­ã«ã¤ã„ã¦ã®æƒ…å ±
  - æ–°æ­“ç¥­ã«ã¤ã„ã¦ã®æ¡ˆå†…æ–‡
  - æ–°æ­“ç¥­ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆ
  - é–‹å‚¬æ—¥æ™‚
  - é–‹å‚¬å ´æ‰€
  - å…¥å ´ã«ã¤ã„ã¦
  - è«¸æ³¨æ„

ã¾ãŸã€æ©Ÿèƒ½ã¨ã—ã¦

- å›£ä½“ã®æ¤œç´¢æ©Ÿèƒ½
  åå‰ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚Šæ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
  æ°—ã«ãªã£ãŸå›£ä½“ã‚’ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã§ãã‚‹

ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã¨ãªã‚Šã¾ã—ãŸã€‚

## ãƒ‡ã‚¶ã‚¤ãƒ³

ãƒ­ã‚´ã¨ OG ç”»åƒã«ã¤ã„ã¦ã¯[ã±ã†ã‚](https://x.com/210on)ã•ã‚“ãŒæ‹…å½“ã—ã¦ãã‚Œã¾ã—ãŸã€‚
ç‰¹ã«ãƒ­ã‚´ã«ã¤ã„ã¦ã¯ [Advent Calendar 2 æ—¥ç›®ã®è¨˜äº‹](https://note.com/210on/n/n9cc7c8b2a54e)ã§è§¦ã‚Œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§æ˜¯éãã¡ã‚‰ã‚‚ä½µã›ã¦ã”è¦§ãã ã•ã„ï¼

ã‚µã‚¤ãƒˆã®ãƒ¡ã‚¤ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ [ğŸ](https://x.com/ao_ringo_uni) ã•ã‚“ãŒæ‹…å½“ã—ã¦ãã‚Œã¾ã—ãŸã€‚
ãƒ­ã‚´ãƒ‡ã‚¶ã‚¤ãƒ³ã®é›°å›²æ°—ã«åˆã‚ã›ã€æ¸©ã‹ã¿ãŒã‚ã‚Šã€æŸ”ã‚‰ã‹ã•ã‚’æ„Ÿã˜ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ã«ãªã£ã¦ã„ã¾ã™ã€‚

![æ–°æ­“ Web ã® OG ç”»åƒã€‚ä¸­å¤®éƒ¨ã«æ–°æ­“ç¥­ã®ãƒ­ã‚´ã¨ã€Œæ–°æ­“ç¥­æƒ…å ±ãƒ»å›£ä½“ç´¹ä»‹ã‚µã‚¤ãƒˆ æ–°æ­“ Webã€ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚](/images/tsukuba-shinkan-web/og-image.png)
_ä»Šå¹´åº¦ã®æ–°æ­“ Web ã® OG ç”»åƒ - https://shinkan-web.zdk.tsukuba.ac.jp ã‚ˆã‚Šå¼•ç”¨_

## å®Ÿè£…

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ [Astro](https://astro.build/) ã‚’æ¡ç”¨ã—ã€[Cloudflare](https://www.cloudflare.com/) ã«ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã—ãŸã€‚

Astro ã‚’æ¡ç”¨ã—ãŸç†ç”±ã§ã™ãŒã€ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ãã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã—ã‚„ã™ã„ã‹ã‚‰ã¨ã„ã†ã®ãŒå¤§ãã‹ã£ãŸã§ã™ã€‚
ã¾ãŸã€ä»Šå›ã¯ãã“ã¾ã§è¤‡é›‘ãª Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªã„ãŸã‚ã€Astro ã®ç‰¹æ€§ãŒæœ€é©ã ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚

ãã—ã¦ã€CMS ã¨ã—ã¦ [Strapi](https://strapi.io/) ãŒã€æ¤œç´¢ã®ãŸã‚ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦ [Meilisearch](https://www.meilisearch.com/) ãŒå»ºã£ã¦ã„ã¾ã™ã€‚
Strapi ã¨ Meilisearch ã«ã¤ã„ã¦ã¯ [raspi0124](https://x.com/raspi0124) ã•ã‚“ãŒãƒ¡ã‚¤ãƒ³ã§æ‹…å½“ã—ã¦ãã‚Œã¾ã—ãŸã€‚

æ¤œç´¢æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯ [Astro ã® SSR æ©Ÿèƒ½](https://docs.astro.build/en/guides/on-demand-rendering/)ã‚’ç”¨ã„ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å›£ä½“å€‹åˆ¥ã®ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯ Strapi ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒšãƒ¼ã‚¸ã‚’ SSG ã—ã¦ã„ã¾ã™ã€‚

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ Astro ã¨é«˜é€Ÿãªæ¤œç´¢ãŒå¯èƒ½ãª Meilisearchã€ãã—ã¦é©åˆ‡ã« SSR ã¨ SSG ã‚’ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å¿«é©ãªãƒ¦ãƒ¼ã‚¶ä½“é¨“ã‚’å®Ÿç¾ã§ããŸã¨æ€ã„ã¾ã™ã€‚
æ–°æ­“ Web ã¯å›£ä½“æ¤œç´¢æ©Ÿèƒ½ã‚’æœ‰ã—ã¦ã„ã‚‹ãŸã‚ã€æ–°æ­“ç¥­ã®æœ€ä¸­ã«å±‹å¤–ã§ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚ãã†ã„ã£ãŸç‚¹ã‹ã‚‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é«˜ã‚ã‚‹ã“ã¨ã¯å€‹äººçš„ã«ç‰¹ã«æ„è­˜ã—ãŸãƒã‚¤ãƒ³ãƒˆã§ã—ãŸã€‚

ä»¥ä¸‹ã€ã“ã ã‚ã£ãŸç‚¹ãªã©ã«ã¤ã„ã¦è¦ç´ ã”ã¨ã«è¿°ã¹ã¦ã„ãã¾ã™ã€‚

### å›£ä½“ä¸€è¦§

æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ãŒç©ºæ–‡å­—ã§ã‚ã‚‹å ´åˆã€å…¨ã¦ã®å›£ä½“ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ã“ã®ä¸¦ã³é †ã§ã™ãŒã€å…¬å¹³æ€§ã®è¦³ç‚¹ã‹ã‚‰åŠæ—¥ã«1å›é †åºã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ä¸¦ã³æ›¿ãˆã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã‚’ã—ã¦ãŠã‚Šã€åŠæ—¥å‘¨æœŸã«å¤‰ã‚ã‚‹å€¤ã‚’ä¹±æ•°ã®ã‚·ãƒ¼ãƒ‰ã¨ã—ã¦ã€ãã‚Œã‚’ã‚‚ã¨ã«ä¸¦ã³æ›¿ãˆã¦ã„ã¾ã™ã€‚

```ts
if (query === "") {
  const today = new Date(
    Date.now() + (new Date().getTimezoneOffset() + 540) * 60 * 1000,
  );
  const seed =
    today.getFullYear() * today.getMonth() +
    today.getDate() *
      (today.getHours() * 100 + today.getMinutes() > 1200 ? 7 : 13);
  const random = new RandXor(seed);

  orgs.sort(() => random.next() - random.next());
}
```

### å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸

å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸ã¯å¤§ããªã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãŒç›®ç«‹ã¡ã¾ã™ã€‚ã“ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã¯ [Splide](https://ja.splidejs.com/) ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
[Splide ã®ã‚µãƒ ãƒã‚¤ãƒ«ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://ja.splidejs.com/tutorials/thumbnail-carousel/)ã‚’å‚è€ƒã«ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã®å°ã•ãªç”»åƒã‹ã‚‰ãªã‚‹ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ¡ã‚¤ãƒ³ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚‚åˆ‡ã‚Šæ›¿ã‚ã‚‹ã€2 ã¤ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãŒåŒæœŸã™ã‚‹ã‚‚ã®å®Ÿè£…ã—ã¾ã—ãŸã€‚

ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ã«ã‚ãŸã‚Šã€æ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¯”è¼ƒã—ã¾ã—ãŸã€‚Splide ã¯ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨æ¯”ã¹ã€å°ã•ãè»½ã„ã“ã¨ã‚„ã€æŸ”è»Ÿæ€§ãŒã‚ã‚‹ã“ã¨ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«å„ªã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰æ¡ç”¨ã—ã¾ã—ãŸã€‚

![å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ](/images/tsukuba-shinkan-web/org-screenshot.png)
_å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ - https://shinkan-web.zdk.tsukuba.ac.jp/orgs/102 [^2]ã‚ˆã‚Šå¼•ç”¨_

ã¾ãŸã€ã“ã®å›£ä½“å€‹åˆ¥ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯å›£ä½“ã”ã¨ã« OG ç”»åƒã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
[Astro ã®å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](https://docs.astro.build/ja/guides/routing/#%E5%8B%95%E7%9A%84%E3%83%AB%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0) ã®æ©Ÿèƒ½ã® `getStaticPaths()` é–¢æ•°ã‚’ç”¨ã„ã¦ãƒ“ãƒ«ãƒ‰æ™‚ã« `og/{å›£ä½“ID}.png` ã¨ã„ã†å½¢å¼ã§ [Satori](https://github.com/vercel/satori) ã‚’ç”¨ã„ã¦ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚
ä»Šå›åˆã‚ã¦ Satori ã‚’ä½¿ã„ã¾ã—ãŸãŒã€HTML ã§ç”»åƒã‚’ç”Ÿæˆã§ãã‚‹ã®ã¯ã‹ãªã‚Šæ–°é®®ã§ä½¿ã„ã‚„ã™ã‹ã£ãŸã§ã™ã€‚
ãŸã ã€`background-image` ã«ç”»åƒã‚’æŒ‡å®šã™ã‚‹éš›ã«å°‘ã€…è‹¦æˆ¦ã—ã¾ã—ãŸã€‚`ArrayBuffer` ã¨ã—ã¦ç”»åƒã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€Base64 å½¢å¼ã§åŸ‹ã‚è¾¼ã‚€ã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸãŒã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ã¯ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹â€¦â€¦

![å›£ä½“å€‹åˆ¥ã§ç”Ÿæˆã•ã‚Œã‚‹ OG ç”»åƒãŒä¸¦ã‚“ã§ã„ã‚‹](/images/tsukuba-shinkan-web/org-og-images.png)
_ç”Ÿæˆã•ã‚Œã‚‹ OG ç”»åƒãŸã¡_

ä»Šå›ã¯å›£ä½“åã®ã¿å…¥ã‚Œã‚‹ç°¡å˜ãªã‚‚ã®ã§ã—ãŸãŒã€ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’å…¥ã‚Œã‚‹ãªã©ã—ã¦ã‚‚è‰¯ã‹ã£ãŸã®ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚

[^2]: ã¡ãªã¿ã«ç­†è€…ã¯[å­¦åœ’ç¥­å®Ÿè¡Œå§”å“¡ä¼š](https://sohosai.com)ã«æ‰€å±ã—ã¦ã„ã¾ã™

### æ¤œç´¢æ©Ÿèƒ½ãƒ»çµã‚Šè¾¼ã¿

å‰è¿°ã—ãŸé€šã‚Šã€æ¤œç´¢æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯ Astro ã® SSR æ©Ÿèƒ½ã‚’ç”¨ã„ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«ãƒ•ã‚£ãƒ«ã‚¿ã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŠã‚Šã€`q=` ã§æŒ‡å®šã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’ã‚‚ã¨ã« Meilisearch ã§æ¤œç´¢ã—ã€`c[]=` ã§æŒ‡å®šã•ã‚ŒãŸç¨®åˆ¥ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¦ã„ã¾ã™ã€‚

ãŠæ°—ã«å…¥ã‚Šã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã¨ã—ã¦ã€`f=` ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã«ã¯è©²å½“ã™ã‚‹å›£ä½“ã®ã¿ã‚’è¡¨ç¤ºã•ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

![ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ§‹é€ ã®èª¬æ˜](/images/tsukuba-shinkan-web/query.png)
_ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ§‹é€ _

### ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½

ãŠæ°—ã«å…¥ã‚Šã—ãŸå›£ä½“ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®[ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸](https://developer.mozilla.org/ja/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API)ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚
ä¿å­˜ã•ã‚Œã‚‹å€¤ã§ã™ãŒã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ä¹—ã›ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ã‚Šãƒ•ã‚£ãƒ«ã‚¿ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚å°‘ã—ã§ã‚‚çŸ­ããªã‚‹ã‚ˆã†ã«è¨­è¨ˆã—ã¾ã—ãŸã€‚

åŸºæœ¬çš„ãªå®Ÿè£…ã®æ–¹é‡ã¨ã—ã¦ã€ãƒ“ãƒƒãƒˆãŒç«‹ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’çŠ¶æ…‹ã¨ã—ã¦æŒã¤ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ä¾‹ãˆã° `10001` ã®å ´åˆã¯ ID ãŒ 0 ã¨4 ã®å›£ä½“ãŒãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã€‚
ã“ã‚Œã‚’å…¨ã¦ã®å›£ä½“ã«å¯¾ã—ã¦è¡Œãˆã° `1000100100...` ã®ã‚ˆã†ãªãƒ“ãƒƒãƒˆåˆ—ãŒå¾—ã‚‰ã‚Œã‚‹ã®ã§ã€ã“ã‚Œã‚’ 5 æ¡ã”ã¨ã«åŒºåˆ‡ã‚Šã€32 é€²æ•°ã®ã‚ˆã†ãªå½¢ã§ä¿å­˜ã—ã¦ã„ã¾ã™ã€‚
å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```ts
// ãŠæ°—ã«å…¥ã‚Šã•ã‚Œã¦ã„ã‚‹å›£ä½“ã‚’ localStorage ã‹ã‚‰å–å¾—ã—ã€ID ã®é…åˆ—ã¨ã—ã¦å¾—ã‚‹
let favoriteGroups = ((): string[] => {
  if (typeof localStorage !== "undefined") {
    const val = localStorage.getItem("favoriteGroups");
    if (val) {
      let ret = [];
      for (let i = 0; i < val.length; i++) {
        ret.push(
          ...[
            ...("0" <= val[i] && val[i] <= "9"
              ? parseInt(val[i])
              : val.charCodeAt(i) - 97 + 10
            )
              .toString(2)
              .padStart(5, "0"),
          ].reverse(),
        );
      }
      return ret;
    }
  }
  return [];
})();

// localStorage ã«ä¿å­˜ã™ã‚‹å½¢å¼ã«å¤‰æ›ã™ã‚‹
function encodeFavoriteGroups(val: string[]): string {
  let ret = "";
  for (let i = 0; i < val.length; i += 5) {
    const num = parseInt(
      val
        .slice(i, i + 5)
        .reverse()
        .join(""),
      2,
    );
    if (num < 10) {
      ret += String(num);
    } else {
      ret += String.fromCharCode(97 + num - 10);
    }
  }
  return ret;
}
```

ã¾ãŸã€ãƒãƒ¼ãƒˆã‚’æŠ¼ã—ãŸéš›ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å·¥å¤«ã—ãŸãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚
X (æ—§ Twitter) ã®ã„ã„ã­ãƒœã‚¿ãƒ³ã®æŒ™å‹•ã‚’å‚è€ƒã«ã€æŠ¼ã—ã¦æ°—æŒã¡ã„ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç›®æŒ‡ã—ã¾ã—ãŸã€‚

![](/images/tsukuba-shinkan-web/heart.gif)
_ãƒãƒ¼ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³_

å‹•ãã¯ CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

```html
<button
  class="heart"
  aria-label="ãŠæ°—ã«å…¥ã‚Šã«ç™»éŒ²ã™ã‚‹"
  aria-pressed="false"
  data-group-id="{id}"
>
  <Icon class="like-line" name="ri:heart-3-line" aria-hidden />
  <Icon class="like-fill" name="ri:heart-3-fill" aria-hidden />
  <div class="effects" aria-hidden>
    <!-- ãƒ›ãƒãƒ¼æ™‚ã®èƒŒæ™¯ã®å†† -->
    <span class="bg-circle"></span>
    <!-- ã‚¯ãƒªãƒƒã‚¯ã—ãŸéš›ã®å††ãŒåºƒãŒã‚‹ã‚ˆã†ãªæ¼”å‡º -->
    <span class="explosion"></span>
  </div>
</button>

<style>
  /* ä¸€éƒ¨çœç•¥ */
  .heart[aria-pressed="true"] .like-fill {
    display: block;
    animation: likeAnimation 1000ms forwards;
  }
  .heart[aria-pressed="true"] .explosion {
    animation: explosionAnimation 1000ms forwards;
  }

  @keyframes explosionAnimation {
    0% {
      width: 0.0001px;
      border: solid 0 #dd4688;
      opacity: 0;
    }
    20% {
      border: solid 0.75rem #cc8ef5;
      opacity: 1;
    }
    40% {
      width: 1.4rem;
      border: solid 0px #cc8ef5;
      opacity: 0;
    }
    100% {
      opacity: 0;
    }
  }
  @keyframes likeAnimation {
    0% {
      transform: scale(0);
    }
    30% {
      transform: scale(0);
    }
    40% {
      transform: scale(1.2, 1.2);
    }
    60% {
      transform: scale(1, 1) translate(0%, -10%);
    }
    65% {
      transform: scale(1.1, 0.9) translate(0%, 5%);
    }
    70% {
      transform: scale(0.95, 1.05) translate(0%, -3%);
    }
    80% {
      transform: scale(1, 1) translate(0%, 0%);
    }
  }
</style>
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒãƒ¼ãƒˆã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æŠœç²‹ã§ã™ã€‚

ã¾ãŸã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é…æ…®ã™ã‚‹ãŸã‚ `aria-label` ã‚„ `aria-pressed` ã‚’æŒ‡å®šã—ã¾ã—ãŸã€‚
ç‰¹ã« CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ `aria-pressed` ã®å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã§å‹•ãã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚

### ã‚µã‚¤ãƒ‰ãƒãƒ¼

ã‚µã‚¤ãƒ‰ã«å›ºå®šã•ã‚Œã‚‹éƒ¨åˆ†ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’é ‘å¼µã‚Šã¾ã—ãŸã€‚PC è¡¨ç¤ºã§ã¯å³å´ã«ã€SP ã¾ãŸã¯ã€ç¸¦å¹…ãŒå°ã•ã„æ™‚ã¯ä¸Šéƒ¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
ãƒ–ãƒ¬ã‚¤ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’æ¨ªå¹…ã ã‘ã§ãªãã€ç¸¦å¹…ã«ã‚‚è¨­ã‘ã‚‹ã“ã¨ã§ã©ã‚“ãªç«¯æœ«ã§è¦‹ã¦ã‚‚æŸ”è»Ÿã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã—ãŸã€‚

![](/images/tsukuba-shinkan-web/responsive.gif)
_æ§˜ã€…ãªå¤§ãã•ã§è¡¨ç¤ºã—ã¦ã„ã‚‹ãƒ‡ãƒ¢ã€æŸ”è»Ÿã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒåˆ‡ã‚Šæ›¿ã‚ã£ã¦ã„ã‚‹ - https://shinkan-web.zdk.tsukuba.ac.jp ã‚ˆã‚Šå¼•ç”¨_

### ãã®ä»–

## ã‚€ã™ã³ã«ã‹ãˆã¦
